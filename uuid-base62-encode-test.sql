USE [testdb]
GO

--##############################################################################

IF EXISTS(SELECT *
	FROM   sys.objects
	WHERE  object_id = OBJECT_ID(N'[dbo].[TestBase62]')
	AND type IN ( N'U' ))
	DROP TABLE [dbo].[TestBase62]

GO

CREATE TABLE dbo.TestBase62
   (base62 varchar(22) NOT NULL,
	uuid varchar(36) NOT NULL,
 	base_to_uuid bit,
 	uuid_to_base bit)
GO

INSERT dbo.TestBase62 (base62, uuid) VALUES ('8Ayz56odjTBygBuhWjfrx' , 'A950316D-C105-4E02-94C8-E948CA5E5504');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4U6sZo9kFS2weMLGMzWbTo', 'BE778A5C-0AC0-45E4-A15B-4DD7687C6293');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7DA6V6QsOEf0ClUjJH8AYi', 'BFC10440-4355-4885-BF3F-1DA98D44F9EC');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('2JrBqdY7jnX0OHDR6d2s4h', '78D5DCDB-830A-421A-BEE7-8BBA67C63C4C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7JXhb3kbX0sUnVApYLij4i', '8326E148-681A-4E94-8A66-15263FE85AF0');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1VIf8ycV91ntQI1kn6Mr9R', '0A79FAAD-A6D1-4CBF-BD2B-91CD34DF7131');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1FwwsQoReqp3dUVxbKRNZ8', 'A84855E6-C857-4BAB-B8C3-92BD435A4F29');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5aQWeY5q1RMEKc0dEbBq6d', 'CA3ACF63-7B6C-4652-B11A-9B913AD596B7');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('25n3AeIMFc2uYhGMOiyDII', 'A9238E02-943C-4830-B2A8-A638B960C844');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4IVLAXjPRqq2AuYIGO7jpi', '44B9C402-45D4-4D4F-B62F-4210D5013C8D');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7Of6ofkS5GH80WmM6cxTeR', 'BA897B87-D6DD-4F1C-AA45-8D551A7311F3');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('22M4JIBGwIMqb3yWEBUK7j', 'E2F0292F-026F-4613-8038-01A21056F642');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4i4ZSeotogTWLvr1qJSKTL', '6970E5FB-2842-4969-9B79-3765F1C5C89A');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('vJ6lMsvpFaEjudVBlIA3m' , 'C2532C52-938F-434E-93D6-711685D55E1E');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5RfyLOIrUobQN490ffzzxJ', '47034259-3C2F-4FF9-9724-F5C736A1F3B2');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4P2OtJf66dASipXxkPNvGx', '55FD5557-C0BD-440F-8622-20A3B959B290');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('2Y9A0HsDWSlnUICBgCYbLr', '6548880F-912F-4E5C-BB80-BEE3736FCF53');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5Z0Ltehs3pK4J0TGEoDL1Y', 'E35B8B2C-FD2F-477D-B012-190FC7E4D5B6');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7iNLItLbEGb0JIJCeMwXTH', 'B3FFDCAB-876A-4CA8-B7AB-074400EA83FD');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('3ySBWe91upOj5uHEcvfF9s', 'EEA9C928-9E23-455E-83DF-E14E0EC39B82');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('3VVOXl5QIXhF2x4BB45BkM', 'FBBEB5DE-26B6-4074-BDA9-5DC542714473');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5IngnBVoAvys0uvOkoaDNM', 'F162929C-FA56-4DA6-A481-34DB36833FAE');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('32MYw9bqGOJotTZMy5eUTt', '67C70445-91BF-4FC1-9547-45F8ABC5D263');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('77PuSWFMMwMsc4rjyUoOES', '6497EB70-9635-424F-A30A-027CFED9EDE9');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1LgLX0CPZrwkPmO7iapP3L', '595DB81B-7C68-4A44-9A35-51589B06592C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('111Q4aB5emT0n7RCOjS1kW', '3E7C27B8-FE7B-4E66-80BC-A4AF66216621');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('2s6UPvqcdlEIMGa7AmoACH', '91DCE311-C68C-4B6B-B629-9F347FEE625E');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4oThWaeoEdev6EcwYeUMse', 'CECCE864-8820-4779-A6F0-EFF2ABC32D9E');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('yLDx1MNbRXtGyPeBFdv45' , '285D3DB9-EAB5-456F-868D-604F1477FA1F');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('3k19gTUY3fxhoubNDiBGdX', '443A4ADB-FF0A-4F16-BD17-F1322547F57A');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('77RraDc0CFFzXtbv1Zmcrf', '31F6F0E7-BD46-4B58-B006-869F5B20F2E9');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4akgqhlmqxBCPtZLGS72Lj', 'E54F1893-796B-4FCD-B1EC-B3BEED99E796');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5H0YQgpt9KakPvrQYvxH52', '89B569F4-3171-4531-8FA5-560166544CAD');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('6c1ZKJXKcN87ihtSssgaSE', '937DFF36-3EDC-4267-8E23-7BD873E94AD9');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('2OtBBSnw3Nb4dOjYTpN4YZ', '6F6FD847-94D2-4606-90CB-0CA28876E74E');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('YDWz2C470oPMfO3D43jTv' , '5790CC3B-E2AF-44AC-AA21-338FFC492212');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('6ZbzCUNgF1C1hLwvaZMlzf', '39A3FBEB-0E23-4289-8368-0F47339903D8');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4BOYEjNVqoNqtxLF3vgqDH', '5801A227-1F57-43A6-A87A-4DBE637B7789');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5OES2qoKY7CefmfkaVdRFz', '4F8D9783-E5AD-4DA9-BFE8-84ED6F6820B1');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7JAWY8SzMFT4ndlQ95DSk4', '71503D60-F7C7-4F0E-92F9-A3D8713028F0');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1g8px1Lt71VZ5kNYTUosgk', '0D5270E2-E571-481B-A593-2D296FB53037');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5j4qiUXqBUamQkoRLsqRs6', '3ABF8966-5C76-4AAE-8DC6-859E7E672CBC');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4mDrB0uqjd6vd4qU4FksIG', 'D940D7C4-C9FD-4B0E-8168-AFE996C2FB9C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1pdanJa3DFQZoj1gJSfgBp', '390CDD9D-A8A5-45C9-8237-44D3AD02393C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('3mSScf08V64TLX3HmZQwZZ', '9ED94EA5-AA39-420E-9D10-7CCE735C407C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('6cpbgksDesgjDUugRWo7Tx', '53AF35ED-E7A7-42EF-AA62-D1A27767B8D9');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('oSMQvHfZGVEZksFYwayhB' , '08345265-FBE8-4FE1-8DEF-54575E69BD1A');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('3hBIlqd8JTicPCw3tFyl4e', '1D6F38CC-7186-495B-B674-EDB2B57A7479');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4ndbmoh0OWsjMG04teOn1C', 'E61A57EE-8C7A-4561-A3CF-4CF5CDC6BB9D');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('Xsy0xHDsOuZsQYqHIC201' , 'B2EF1AA9-DBCF-49F7-90FB-44D8914AF511');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('47pbtuIquYAcElCZ6gpqIS', '39466050-8F3A-4437-BDB1-AB7827069487');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('2nGyoFZ6sDs8nAgTEUepbd', '3A28F009-3F0A-421C-BAED-21B00B8DD35B');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1FF5rFwq5zBNjRv9NXM3jE', 'D513D740-2886-43F9-A46E-747CC663EF28');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('6Ps98dv14GZPZLiJIL574w', 'DB3991F6-AD75-42F0-87F9-3EF7334ADAD2');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1auiZqFM0UXbnbruh4QEfs', '73ECB2EC-8E75-46FE-B3D8-46BE997A6B34');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('58XEUMPGanJsRyw90ex7YO', 'DE186E58-779D-4E7F-9EC2-458526D5CEA8');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('NK7tn0WH1NsCnq5LHoQ6n' , '369BD72D-FFDB-4BDA-BA7A-AF9F3D625C0C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('ZvwJwPIfnvpD7yjG8qKSA' , 'EC472A42-3922-412C-8B01-D1A94C210B13');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('79OPOsegSbyQO8u1WtaKia', 'CC544DAC-87F2-43E4-972C-365CB7E6F9EA');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1AJXXCcB3Moy6MLw4DlWYi', '52D23AC0-297B-4BAC-B8BC-7B34BFC85226');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5yLpmO0ViV5zMcKIhNFkrr', '3C6D3CDB-1EB2-4FDE-B75F-713B529344C4');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1pkP3RHAypWNylhOIdCvfB', 'FD62B92D-28F4-4346-AA1D-488DD2E9473C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('6b7lErPfsNgPO4u8032LYL', '98532FC5-EDEF-4AD2-9719-76F25CCBD0D8');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7FXsmWwiXBcYR8DCvznpAU', '91CE20FE-B556-4CC4-9FA0-FF5347A23CEE');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7X8loGHHnIVVf5zyM8NLvR', 'BBC8FAC5-A7E1-417F-918F-1AE38FB08FF7');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5PXKLT1bZuht2zeZXScrL0', 'D658051A-5E34-40E3-80B2-9E1AEC60D1B1');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('72vtMRqJXu8T9vu25mW0MM', '165C0A4A-D2FE-4C50-85D4-BF27D87F8DE7');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('65Y83E7JrKbNn7rAQpL4Zo', '5A02C404-8F24-472D-BCA3-084FC82515C8');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4SYM8d66zXSaY92p5JEH6N', 'D62E77AF-2D58-400C-9DDF-7713AC468F92');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4hSvX1Kp3xDSikVnbi0miR', '662FA863-17E4-48A8-9845-07E7C166769A');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('2D6aCx9KhMsw6hJvdJZYjg', '72413D90-CD29-4512-AED5-FA82CEC9A848');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('2fulGyAJbrOWWqWEAcRX4B', 'AB46314F-CFC7-448D-85D1-C108A143ED57');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5aTypWaNG0obGYRvLmdo7f', '7DDBCF8B-F3EE-4575-88E1-148D54649EB7');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1L2bG0GWLO61XaBGDyChuq', '117401B0-5014-4559-98E9-AE3EC00D022C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('rFkcZuKmeHQXBrlUXexQF' , '24237B97-6A62-409E-AA0F-1B05ECD1381C');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5kn8k69fp9QuIL0SZf0NyG', 'B23F9224-F18A-493A-9D1D-D3E4BFFC14BD');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('2zJQxo5vNz2DAnyKbJbNmF', 'F6EF9373-1ED2-44E1-945E-31BFD7EC3462');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5J3Y8NcpDACbdOoW8rmapF', '49B17EC9-ABFE-49CB-A7D2-C669C33762AE');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5u6rC9So0F9RJdoViePGVr', 'F77762EF-486E-40B4-8574-EEBD7B2205C2');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1fKaSdKG4licdhSQVW6dPL', '9999292F-A982-46FD-AC8A-353FCEC0C236');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('WBumDops0tg5UmOInrCTp' , '650A8B91-E255-438A-874B-22E6196B0F11');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7ZtjJeSDeVNFEfa54aMUes', '0394FFAE-A7AF-4D3D-BA8E-A3A7B2C705F9');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('23g7QJ3gEJA904s4Unun3j', '7DC9E43B-FA99-47CE-A38A-C31B6BE0A943');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5zk1GFf5WaU0gw0gpFzF2g', '98B3560A-EA05-4834-BC6C-27A5FA2901C5');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('FAnSOzxA12zysVaLzQkkT' , 'DC4A03D9-481D-493A-A044-0BC3EFA10A08');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('6FPkdvVaRVOycFUJOo3b3z', '76B46E53-F1FB-48DF-A820-F4EC767C4FCD');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7XprZWqZpKdKKu7cRhM54y', '60134EE8-C4A8-40F7-BC72-5AE115FCEDF7');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('1lvU14uygbSv7FJHll8tKI', '4ABDF756-F24B-4EA0-9B98-656E897D413A');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('6Xn9awQCqlxgMNTPUOJIYz', 'FACB67A9-8934-4111-9DDF-3B8C82B30CD7');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('6cQ7pM0lt4TBmg5jR6qhZA', '6B448850-C990-453B-B9C7-55DE54A580D9');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('3xi6ZwS0cRyafkAnAHYYRO', '38235D2A-F407-42EB-8FC1-B65C61EE3682');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('5d8GxDHUzIGedRMRqhEhhm', 'F0CA66C6-B40B-4D72-BD73-EFAF88E405B9');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('7KWOQAFQyExkZ9PPtd7Ftw', '703DEFE0-975F-4C85-A10C-106293B5DFF0');
INSERT dbo.TestBase62 (base62, uuid) VALUES ('4f7ecbK6Zhzbj3VZbEwyXl', '487447CD-B1B7-4B61-8D3E-DF9BD1843899');

GO

--##############################################################################

DECLARE @uuid varchar(36)
DECLARE @base62 varchar(22)

DECLARE UUID_CURSOR CURSOR 
  LOCAL STATIC READ_ONLY FORWARD_ONLY
FOR 
SELECT DISTINCT uuid 
FROM dbo.TestBase62

OPEN UUID_CURSOR
FETCH NEXT FROM UUID_CURSOR INTO @uuid
WHILE @@FETCH_STATUS = 0
BEGIN 
    set @base62 = (select base62 from dbo.TestBase62 where uuid = @uuid);
    --print @uuid;
	--print @base62;
	IF dbo.fn_base62_to_uuid(@base62) = @uuid
	BEGIN
		--PRINT @base62 + ' = ' + @uuid + ' success ...';
		UPDATE dbo.TestBase62 SET base_to_uuid='TRUE' WHERE uuid = @uuid;
	END
	ELSE
	BEGIN
		--PRINT @base62 + ' = ' + @uuid + ' failed !!!';
		UPDATE dbo.TestBase62 SET base_to_uuid='FALSE' WHERE uuid = @uuid;
	END
	
	IF dbo.fn_uuid_to_base62(@uuid) = @base62
	BEGIN
		--PRINT @uuid + ' = ' + @base62 + ' success ...';
		UPDATE dbo.TestBase62 SET uuid_to_base='TRUE' WHERE uuid = @uuid;
	END
	ELSE
	BEGIN
		--PRINT @uuid + ' = ' + @base62 + ' failed !!!';
		UPDATE dbo.TestBase62 SET uuid_to_base='FALSE' WHERE uuid = @uuid;
	END

    FETCH NEXT FROM UUID_CURSOR INTO @uuid
END
CLOSE UUID_CURSOR
DEALLOCATE UUID_CURSOR

GO

SELECT TOP 100 [base62]
      ,[uuid]
      ,[base_to_uuid]
      ,[uuid_to_base]
  FROM [testdb].[dbo].[TestBase62]

GO

--##############################################################################

